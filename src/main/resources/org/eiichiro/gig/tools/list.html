<div id="content-description"><h2>${entity.class} List</h2></div>
<div id="content-main">
<div id="content-main-header">
<div id="content-main-message"></div>
<div id="content-main-link">
<span><a onclick="create()">È CREATE NEW ENTRY</a></span>
</div>
<div class="clear"></div>
</div>
<div id="content-main-list" class="content-main-table">
<table>
<thead>
<tr>
<td class="content-main-table-thead-td">${key.name}</td><td class="content-main-table-thead-td-right"></td>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
</div>
<div id="confirmation-background" onclick="cancel()"></div>
<div id="confirmation">
<div id="confirmation-message">Are you sure?</div>
<div id="confirmation-link">
<span><a onclick="cancel()">È CANCEL</a></span>
</div>
<div class="clear"></div>
<div id="confirmation-button"><button>DELETE</button></div>
</div>
<script>
function construct() {
	$.getJSON('list', function(data) {
		var len = data.length;
		
		if (len > 0) {
			$.each(data, function(index, value) {
				var row;
				
				if (index + 1 < len) {
					row = '<tr><td class="content-main-table-tbody-td">' 
							+ value.${key.name} + '</td><td class="content-main-table-tbody-td-right">';
				} else {
					row = '<tr><td class="content-main-table-tbody-td-bottom">' 
							+ value.${key.name} + '</td><td>';
				}
				
				row += '<div class="content-main-table-action"><span><a onclick="show(\'' 
						+ value.${key.name} + '\')">SHOW</a></span><span><a onclick="edit(\'' 
						+ value.${key.name} + '\')">EDIT</a></span><span><a onclick="del(\'' 
						+ value.${key.name} + '\')">DELETE</a></span></div></td></tr>';
				$('#content-main-list table tbody').append(row);
			});
		} else {
			$('#content-main-message').removeClass().addClass('content-main-message-error').text('No entry');
		}
	});
}
function del(${key.name}) {
	$('#confirmation-background').show();
	$('#confirmation').show();
	$('#confirmation-button button').unbind('click');
	$('#confirmation-button button').bind('click', function() {
		$.post('delete', {
			${key.name}: ${key.name}
		}, function() {
			list(function() {
				$('#content-main-message').removeClass().addClass('content-main-message-success').text('Successfully deleted');
			});
		}).error(function(request, status, message) {
			$('#content-main-message').removeClass().addClass('content-main-message-error').text('Oops! ' + message);
		});
		$('#confirmation-background').hide();
		$('#confirmation').hide();
	});
}
function cancel() {
	$('#confirmation-background').hide();
	$('#confirmation').hide();
}
</script>
